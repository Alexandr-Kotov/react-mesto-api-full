{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u043A\\u043E\\u0442\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\praktikum\\\\react-mesto-auth\\\\src\\\\components\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { BrowserRouter, Switch } from \"react-router-dom\";\nimport { Header } from \"./Header\";\nimport { Footer } from \"./Footer\";\nimport { Main } from \"./Main\";\nimport { ImagePopup } from \"./ImagePopup\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport { api } from \"../utils/api\";\nimport { EditProfilePopup } from \"./EditProfilePopup\";\nimport { EditAvatarPopup } from \"./EditAvatarPopup\";\nimport { AddPlacePopup } from \"./AddPlacePopup\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [currentUser, setCurrentUser] = useState(null);\n  const [cards, setCards] = useState([]);\n  useEffect(() => {\n    Promise.all([api.getProfile(), api.getCardSever()]).then(_ref => {\n      let [user, cards] = _ref;\n      setCurrentUser(user);\n      setCards(cards);\n    }).catch(error => console.log(error));\n  }, []);\n\n  const handleEditAvatarClick = () => setIsEditAvatarPopupOpen(true);\n\n  const handleEditProfileClick = () => setIsEditProfilePopupOpen(true);\n\n  const handleAddPlaceClick = () => setIsAddPlacePopupOpen(true);\n\n  const handleCardClick = card => setSelectedCard(card);\n\n  const handleCardLike = card => {\n    const hasMyLike = card.likes.some(like => like._id === currentUser._id);\n    api.toggleLike(card._id, hasMyLike).then(newCard => setCards(state => state.map(c => c._id === card._id ? newCard : c))).catch(err => console.log(err));\n  };\n\n  const handleCardDelete = card => api.deleteCard(card._id).then(() => {\n    setCards(state => state.filter(c => c._id != card._id));\n  }).catch(err => console.log(err));\n\n  const closeAllPopups = e => {\n    if (e.type === \"keydown\" || e.target.classList.contains(\"popup_opened\") || e.target.classList.contains(\"popup__close\")) {\n      setIsAddPlacePopupOpen(false);\n      setIsEditAvatarPopupOpen(false);\n      setIsEditProfilePopupOpen(false);\n      setSelectedCard(null);\n    }\n  };\n\n  const handleUserUpdate = user => api.patchProfile(user).then(res => {\n    setCurrentUser(res);\n    setIsEditProfilePopupOpen(false);\n  }).catch(err => console.log(err));\n\n  const handleAvatarUpdate = _ref2 => {\n    let {\n      avatar\n    } = _ref2;\n    return api.patchAvatar(avatar).then(user => {\n      setCurrentUser(user);\n      setIsEditAvatarPopupOpen(false);\n    }).catch(err => console.log(err));\n  };\n\n  const handleAddPlaceSubmit = cardPayload => api.postCardSever(cardPayload).then(newCard => {\n    setCards([newCard, ...cards]);\n    setIsAddPlacePopupOpen(false);\n  }).catch(err => console.log(err));\n\n  return /*#__PURE__*/_jsxDEV(BrowserRouter, {\n    children: /*#__PURE__*/_jsxDEV(CurrentUserContext.Provider, {\n      value: currentUser,\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Switch, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Main, {\n        onAddPlace: handleAddPlaceClick,\n        onEditAvatar: handleEditAvatarClick,\n        onEditProfile: handleEditProfileClick,\n        onCardClick: handleCardClick,\n        cards: cards,\n        onCardDelete: handleCardDelete,\n        onCardLike: handleCardLike\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(EditProfilePopup, {\n        isOpen: isEditProfilePopupOpen,\n        onClose: closeAllPopups,\n        onUserUpdate: handleUserUpdate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AddPlacePopup, {\n        isOpen: isAddPlacePopupOpen,\n        onClose: closeAllPopups,\n        onAddCard: handleAddPlaceSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(EditAvatarPopup, {\n        isOpen: isEditAvatarPopupOpen,\n        onClose: closeAllPopups,\n        onAvatarUpdate: handleAvatarUpdate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ImagePopup, {\n        onClose: closeAllPopups,\n        card: selectedCard\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"SGfeKmSvJtwc6jqGSzjhYp4kJBI=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Users/кот/OneDrive/Рабочий стол/praktikum/react-mesto-auth/src/components/App.js"],"names":["React","useState","useEffect","BrowserRouter","Switch","Header","Footer","Main","ImagePopup","CurrentUserContext","api","EditProfilePopup","EditAvatarPopup","AddPlacePopup","App","loggedIn","setLoggedIn","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","currentUser","setCurrentUser","cards","setCards","Promise","all","getProfile","getCardSever","then","user","catch","error","console","log","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","handleCardClick","card","handleCardLike","hasMyLike","likes","some","like","_id","toggleLike","newCard","state","map","c","err","handleCardDelete","deleteCard","filter","closeAllPopups","e","type","target","classList","contains","handleUserUpdate","patchProfile","res","handleAvatarUpdate","avatar","patchAvatar","handleAddPlaceSubmit","cardPayload","postCardSever"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { BrowserRouter, Switch } from \"react-router-dom\";\nimport { Header } from \"./Header\";\nimport { Footer } from \"./Footer\";\nimport { Main } from \"./Main\";\nimport { ImagePopup } from \"./ImagePopup\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport { api } from \"../utils/api\";\nimport { EditProfilePopup } from \"./EditProfilePopup\";\nimport { EditAvatarPopup } from \"./EditAvatarPopup\";\nimport { AddPlacePopup } from \"./AddPlacePopup\";\n\nfunction App() {\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [currentUser, setCurrentUser] = useState(null);\n  const [cards, setCards] = useState([]);\n\n  useEffect(() => {\n    Promise.all([api.getProfile(), api.getCardSever()])\n      .then(([user, cards]) => {\n        setCurrentUser(user);\n        setCards(cards);\n      })\n      .catch((error) => console.log(error));\n  }, []);\n\n  const handleEditAvatarClick = () => setIsEditAvatarPopupOpen(true);\n  const handleEditProfileClick = () => setIsEditProfilePopupOpen(true);\n  const handleAddPlaceClick = () => setIsAddPlacePopupOpen(true);\n  const handleCardClick = (card) => setSelectedCard(card);\n\n  const handleCardLike = (card) => {\n    const hasMyLike = card.likes.some((like) => like._id === currentUser._id);\n\n    api\n      .toggleLike(card._id, hasMyLike)\n      .then((newCard) => setCards((state) => state.map((c) => (c._id === card._id ? newCard : c))))\n      .catch((err) => console.log(err));\n  };\n\n  const handleCardDelete = (card) =>\n    api\n      .deleteCard(card._id)\n      .then(() => {\n        setCards((state) => state.filter((c) => c._id != card._id));\n      })\n      .catch((err) => console.log(err));\n\n  const closeAllPopups = (e) => {\n    if (\n      e.type === \"keydown\" ||\n      e.target.classList.contains(\"popup_opened\") ||\n      e.target.classList.contains(\"popup__close\")\n    ) {\n      setIsAddPlacePopupOpen(false);\n      setIsEditAvatarPopupOpen(false);\n      setIsEditProfilePopupOpen(false);\n      setSelectedCard(null);\n    }\n  };\n\n  const handleUserUpdate = (user) =>\n    api\n      .patchProfile(user)\n      .then((res) => {\n        setCurrentUser(res);\n        setIsEditProfilePopupOpen(false);\n      })\n      .catch((err) => console.log(err));\n\n  const handleAvatarUpdate = ({ avatar }) =>\n    api\n      .patchAvatar(avatar)\n      .then((user) => {\n        setCurrentUser(user);\n        setIsEditAvatarPopupOpen(false);\n      })\n      .catch((err) => console.log(err));\n\n  const handleAddPlaceSubmit = (cardPayload) =>\n    api\n      .postCardSever(cardPayload)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        setIsAddPlacePopupOpen(false);\n      })\n      .catch((err) => console.log(err));\n\n  return (\n    <BrowserRouter>\n      <CurrentUserContext.Provider value={currentUser}>\n        <Header />\n        <Switch></Switch>\n        <Main\n          onAddPlace={handleAddPlaceClick}\n          onEditAvatar={handleEditAvatarClick}\n          onEditProfile={handleEditProfileClick}\n          onCardClick={handleCardClick}\n          cards={cards}\n          onCardDelete={handleCardDelete}\n          onCardLike={handleCardLike}\n        />\n        <Footer />\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUserUpdate={handleUserUpdate}\n        />\n\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddCard={handleAddPlaceSubmit}\n        />\n\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onAvatarUpdate={handleAvatarUpdate}\n        />\n\n        <ImagePopup onClose={closeAllPopups} card={selectedCard} />\n      </CurrentUserContext.Provider>\n    </BrowserRouter>\n  );\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}