{"ast":null,"code":"class Api {\n  constructor(_ref) {\n    let {\n      baseUrl,\n      headers\n    } = _ref;\n\n    this.resHandler = res => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`);\n\n    this._baseUrl = baseUrl;\n    this._headers = headers;\n\n    this._resHandler = res => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`);\n  }\n\n  getProfile() {\n    return fetch(`${this._baseUrl}/users/me`, {\n      headers: this._headers\n    }).then(res => this._resHandler(res));\n  }\n\n  patchProfile(me) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify(me)\n    }).then(res => this._resHandler(res));\n  }\n\n  getCardSever() {\n    return fetch(`${this._baseUrl}/cards`, {\n      headers: this._headers\n    }).then(res => this._resHandler(res));\n  }\n\n  postCardSever(card) {\n    return fetch(`${this._baseUrl}/cards`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify(card)\n    }).then(res => this._resHandler(res));\n  }\n\n  deleteCard(id) {\n    return fetch(`${this._baseUrl}/cards/${id}`, {\n      method: 'DELETE',\n      headers: this._headers\n    }).then(res => this._resHandler(res));\n  }\n\n  toggleLike(cardId, hasMyLike) {\n    return fetch(`${this._baseUrl}/cards/${cardId}/likes`, {\n      method: `${hasMyLike ? \"DELETE\" : \"PUT\"}`,\n      headers: this._headers\n    }).then(res => this._resHandler(res));\n  }\n\n  addLike(id) {\n    return fetch(`${this._baseUrl}/cards/${id}/likes`, {\n      method: 'PUT',\n      headers: this._headers\n    }).then(res => this._resHandler(res));\n  }\n\n  patchAvatar(avatarLink) {\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: avatarLink\n      })\n    }).then(res => this._resHandler(res));\n  }\n\n}\n\nexport const api = new Api({\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-37',\n  headers: {\n    authorization: '4681c571-88f6-4ca4-b1b2-2741f41c35d8',\n    'Content-Type': 'application/json'\n  }\n});","map":{"version":3,"sources":["C:/Users/кот/OneDrive/Рабочий стол/praktikum/mesto-react/src/utils/Api.js"],"names":["Api","constructor","baseUrl","headers","resHandler","res","ok","json","Promise","reject","status","_baseUrl","_headers","_resHandler","getProfile","fetch","then","patchProfile","me","method","body","JSON","stringify","getCardSever","postCardSever","card","deleteCard","id","toggleLike","cardId","hasMyLike","addLike","patchAvatar","avatarLink","avatar","api","authorization"],"mappings":"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","sourcesContent":["class Api {\r\n  constructor({baseUrl, headers}) {\r\n    this._baseUrl = baseUrl;\r\n    this._headers = headers;\r\n    this._resHandler = (res) => (res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`));\r\n  }\r\n\r\n  resHandler = (res) => (res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`));\r\n\r\n\r\n  getProfile(){\r\n    return fetch(`${this._baseUrl}/users/me`,{\r\n      headers: this._headers\r\n    })  \r\n    .then((res) => this._resHandler(res))\r\n  }\r\n\r\n  patchProfile(me) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify(me),\r\n    }).then((res) => this._resHandler(res));\r\n  }\r\n\r\n  getCardSever(){\r\n    return fetch(`${this._baseUrl}/cards`,{\r\n      headers: this._headers\r\n    })\r\n    .then((res) => this._resHandler(res))\r\n  }\r\n\r\n  postCardSever(card) {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify(card),\r\n    }).then((res) => this._resHandler(res));\r\n  }\r\n\r\n  deleteCard(id){\r\n    return fetch(`${this._baseUrl}/cards/${id}`,{\r\n      method: 'DELETE',\r\n      headers: this._headers,\r\n    })\r\n    .then((res) => this._resHandler(res))\r\n  }\r\n\r\n\r\n  toggleLike(cardId, hasMyLike) {\r\n    return fetch(`${this._baseUrl}/cards/${cardId}/likes`, {\r\n      method: `${hasMyLike ? \"DELETE\" : \"PUT\"}`,\r\n      headers: this._headers,\r\n    }).then((res) => this._resHandler(res));\r\n  }\r\n\r\n\r\n  addLike(id){\r\n    return fetch(`${this._baseUrl}/cards/${id}/likes`,{\r\n      method: 'PUT',\r\n      headers: this._headers,\r\n    })\r\n    .then((res) => this._resHandler(res))\r\n  }\r\n\r\n\r\n  patchAvatar(avatarLink) {\r\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({ \r\n        avatar: avatarLink\r\n      })\r\n    })\r\n    .then((res) => this._resHandler(res))\r\n  }\r\n}\r\n\r\nexport const api = new Api({\r\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-37',\r\n  headers: {\r\n    authorization: '4681c571-88f6-4ca4-b1b2-2741f41c35d8',\r\n    'Content-Type': 'application/json'\r\n  }\r\n});"]},"metadata":{},"sourceType":"module"}